{"uid":"b61f59d1a7fb6cb6","name":"Test Cron Transfer ADA Logs","fullName":"test_cases.test_agent_functions.TestAgentFunctionExecution#test_cron_transfer_ada_logs","historyId":"8f129459ef0776a0fa46da5fc475ea3a","time":{"start":1724135314805,"stop":1724135315013,"duration":208},"status":"failed","statusMessage":"AssertionError: No successful 'transferADA' log found | Failed Logs: [{'agentId': '9c3de914-fb22-4841-8dec-c40704fd1ca8', 'functionName': 'transferADA', 'status': True, 'success': False, 'timestamp': '2024-08-20T06:28:00.881000+00:00', 'message': 'KubærApi [Status 400] : ShelleyTxValidationError ShelleyBasedEraConway (ApplyTxError (ConwayUtxowFailure (UtxoFailure (ValueNotConservedUTxO (MaryValue (Coin 0) (MultiAsset (fromList []))) (MaryValue (Coin 99499640662) (MultiAsset (fromList []))))) :| [ConwayUtxowFailure (UtxoFailure (BadInputsUTxO (fromList [TxIn (TxId {unTxId = SafeHash \"deb2dfe0e755018cbf3b05114734795c1912ee957859d152e9e389f9654cc9a8\"}) (TxIx {unTxIx = 0})])))]))', 'triggerType': 'CRON', 'txHash': None}, {'agentId': '9c3de914-fb22-4841-8dec-c40704fd1ca8', 'functionName': 'transferADA', 'status': True, 'success': False, 'timestamp': '2024-08-20T06:27:55.020000+00:00', 'message': 'KubærApi [Status 400] : ShelleyTxValidationError ShelleyBasedEraConway (ApplyTxError (ConwayUtxowFailure (UtxoFailure (ValueNotConservedUTxO (MaryValue (Coin 0) (MultiAsset (fromList []))) (MaryValue (Coin 99499640662) (MultiAsset (fromList []))))) :| [ConwayUtxowFailure (UtxoFailure (BadInputsUTxO (fromList [TxIn (TxId {unTxId = SafeHash \"deb2dfe0e755018cbf3b05114734795c1912ee957859d152e9e389f9654cc9a8\"}) (TxIx {unTxIx = 0})])))]))', 'triggerType': 'CRON', 'txHash': None}]","statusTrace":"logs = [{'agentId': '9c3de914-fb22-4841-8dec-c40704fd1ca8', 'functionName': 'transferADA', 'message': 'KubærApi [Status 400] ...d': '9c3de914-fb22-4841-8dec-c40704fd1ca8', 'functionName': 'createInfoGovAction', 'message': '', 'status': True, ...}]\nfunction_name = 'transferADA', trigger_type = 'CRON'\nmessage = \"No successful 'transferADA' log found\"\n\n    def assert_successful_log(logs, function_name, trigger_type, message):\n        try:\n>           assert any(\n                log[\"functionName\"] == function_name\n                and log[\"triggerType\"] == trigger_type\n                and log[\"status\"] is True\n                and log[\"success\"] is True\n                for log in logs\n            ), message\nE           AssertionError: No successful 'transferADA' log found\nE           assert False\nE            +  where False = any(<generator object assert_successful_log.<locals>.<genexpr> at 0x7f2c3b380740>)\n\ntest_cases/test_agent_functions.py:6: AssertionError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <test_cases.test_agent_functions.TestAgentFunctionExecution object at 0x7f2c3bb3d430>\nrun_admin_agent_fixture = <Response [200]>\nautonomous_agent_api = <lib.autonomous_agent_api.AutonomousAgentApi object at 0x7f2c3ba5b830>\n\n    @allure.sub_suite(\"CRON\")\n    @allure.title(\"Test Cron Transfer ADA Logs\")\n    @allure.feature(\"Transfer Ada Cron Function\")\n    def test_cron_transfer_ada_logs(\n        self, run_admin_agent_fixture, autonomous_agent_api\n    ):\n        agent_id = run_admin_agent_fixture.json().get(\"id\")\n        logs = (\n            autonomous_agent_api.get_trigger_history(\n                param=f\"?agent_id={agent_id}&functionName={'transferADA'}\"\n            )\n            .json()\n            .get(\"items\")\n        )\n>       assert_successful_log(\n            logs,\n            function_name=\"transferADA\",\n            trigger_type=\"CRON\",\n            message=\"No successful 'transferADA' log found\",\n        )\n\ntest_cases/test_agent_functions.py:50: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nlogs = [{'agentId': '9c3de914-fb22-4841-8dec-c40704fd1ca8', 'functionName': 'transferADA', 'message': 'KubærApi [Status 400] ...d': '9c3de914-fb22-4841-8dec-c40704fd1ca8', 'functionName': 'createInfoGovAction', 'message': '', 'status': True, ...}]\nfunction_name = 'transferADA', trigger_type = 'CRON'\nmessage = \"No successful 'transferADA' log found\"\n\n    def assert_successful_log(logs, function_name, trigger_type, message):\n        try:\n            assert any(\n                log[\"functionName\"] == function_name\n                and log[\"triggerType\"] == trigger_type\n                and log[\"status\"] is True\n                and log[\"success\"] is True\n                for log in logs\n            ), message\n        except AssertionError:\n            failed_logs = [log for log in logs if log[\"functionName\"] == function_name]\n    \n            if failed_logs:\n                allure.attach(\n                    str(failed_logs),\n                    name=\"Filtered Logs with Matching Function Name\",\n                    attachment_type=allure.attachment_type.JSON,\n                )\n            else:\n                allure.attach(\n                    \"No log found with the given parameters.\",\n                    name=\"No Matching Logs\",\n                    attachment_type=allure.attachment_type.TEXT,\n                )\n>           raise AssertionError(\n                f\"{message} | Failed Logs: {failed_logs if failed_logs else 'None'}\"\n            )\nE           AssertionError: No successful 'transferADA' log found | Failed Logs: [{'agentId': '9c3de914-fb22-4841-8dec-c40704fd1ca8', 'functionName': 'transferADA', 'status': True, 'success': False, 'timestamp': '2024-08-20T06:28:00.881000+00:00', 'message': 'KubærApi [Status 400] : ShelleyTxValidationError ShelleyBasedEraConway (ApplyTxError (ConwayUtxowFailure (UtxoFailure (ValueNotConservedUTxO (MaryValue (Coin 0) (MultiAsset (fromList []))) (MaryValue (Coin 99499640662) (MultiAsset (fromList []))))) :| [ConwayUtxowFailure (UtxoFailure (BadInputsUTxO (fromList [TxIn (TxId {unTxId = SafeHash \"deb2dfe0e755018cbf3b05114734795c1912ee957859d152e9e389f9654cc9a8\"}) (TxIx {unTxIx = 0})])))]))', 'triggerType': 'CRON', 'txHash': None}, {'agentId': '9c3de914-fb22-4841-8dec-c40704fd1ca8', 'functionName': 'transferADA', 'status': True, 'success': False, 'timestamp': '2024-08-20T06:27:55.020000+00:00', 'message': 'KubærApi [Status 400] : ShelleyTxValidationError ShelleyBasedEraConway (ApplyTxError (ConwayUtxowFailure (UtxoFailure (ValueNotConservedUTxO (MaryValue (Coin 0) (MultiAsset (fromList []))) (MaryValue (Coin 99499640662) (MultiAsset (fromList []))))) :| [ConwayUtxowFailure (UtxoFailure (BadInputsUTxO (fromList [TxIn (TxId {unTxId = SafeHash \"deb2dfe0e755018cbf3b05114734795c1912ee957859d152e9e389f9654cc9a8\"}) (TxIx {unTxIx = 0})])))]))', 'triggerType': 'CRON', 'txHash': None}]\n\ntest_cases/test_agent_functions.py:28: AssertionError","flaky":true,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"autonomous_agent_api","time":{"start":1724135053838,"stop":1724135053839,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"admin_login_response","time":{"start":1724135054390,"stop":1724135054510,"duration":120},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"admin_login_cookie","time":{"start":1724135054510,"stop":1724135054510,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"create_template_fixture","time":{"start":1724135054511,"stop":1724135054638,"duration":127},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"edit_template_fixture","time":{"start":1724135054638,"stop":1724135054778,"duration":140},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"create_admin_agent_fixture","time":{"start":1724135054778,"stop":1724135054914,"duration":136},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"edit_admin_agent_fixture","time":{"start":1724135055250,"stop":1724135055391,"duration":141},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"load_funds_to_agent_address","time":{"start":1724135055393,"stop":1724135176940,"duration":121547},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"run_admin_agent_fixture","time":{"start":1724135176940,"stop":1724135314318,"duration":137378},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: No successful 'transferADA' log found | Failed Logs: [{'agentId': '9c3de914-fb22-4841-8dec-c40704fd1ca8', 'functionName': 'transferADA', 'status': True, 'success': False, 'timestamp': '2024-08-20T06:28:00.881000+00:00', 'message': 'KubærApi [Status 400] : ShelleyTxValidationError ShelleyBasedEraConway (ApplyTxError (ConwayUtxowFailure (UtxoFailure (ValueNotConservedUTxO (MaryValue (Coin 0) (MultiAsset (fromList []))) (MaryValue (Coin 99499640662) (MultiAsset (fromList []))))) :| [ConwayUtxowFailure (UtxoFailure (BadInputsUTxO (fromList [TxIn (TxId {unTxId = SafeHash \"deb2dfe0e755018cbf3b05114734795c1912ee957859d152e9e389f9654cc9a8\"}) (TxIx {unTxIx = 0})])))]))', 'triggerType': 'CRON', 'txHash': None}, {'agentId': '9c3de914-fb22-4841-8dec-c40704fd1ca8', 'functionName': 'transferADA', 'status': True, 'success': False, 'timestamp': '2024-08-20T06:27:55.020000+00:00', 'message': 'KubærApi [Status 400] : ShelleyTxValidationError ShelleyBasedEraConway (ApplyTxError (ConwayUtxowFailure (UtxoFailure (ValueNotConservedUTxO (MaryValue (Coin 0) (MultiAsset (fromList []))) (MaryValue (Coin 99499640662) (MultiAsset (fromList []))))) :| [ConwayUtxowFailure (UtxoFailure (BadInputsUTxO (fromList [TxIn (TxId {unTxId = SafeHash \"deb2dfe0e755018cbf3b05114734795c1912ee957859d152e9e389f9654cc9a8\"}) (TxIx {unTxIx = 0})])))]))', 'triggerType': 'CRON', 'txHash': None}]","statusTrace":"logs = [{'agentId': '9c3de914-fb22-4841-8dec-c40704fd1ca8', 'functionName': 'transferADA', 'message': 'KubærApi [Status 400] ...d': '9c3de914-fb22-4841-8dec-c40704fd1ca8', 'functionName': 'createInfoGovAction', 'message': '', 'status': True, ...}]\nfunction_name = 'transferADA', trigger_type = 'CRON'\nmessage = \"No successful 'transferADA' log found\"\n\n    def assert_successful_log(logs, function_name, trigger_type, message):\n        try:\n>           assert any(\n                log[\"functionName\"] == function_name\n                and log[\"triggerType\"] == trigger_type\n                and log[\"status\"] is True\n                and log[\"success\"] is True\n                for log in logs\n            ), message\nE           AssertionError: No successful 'transferADA' log found\nE           assert False\nE            +  where False = any(<generator object assert_successful_log.<locals>.<genexpr> at 0x7f2c3b380740>)\n\ntest_cases/test_agent_functions.py:6: AssertionError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <test_cases.test_agent_functions.TestAgentFunctionExecution object at 0x7f2c3bb3d430>\nrun_admin_agent_fixture = <Response [200]>\nautonomous_agent_api = <lib.autonomous_agent_api.AutonomousAgentApi object at 0x7f2c3ba5b830>\n\n    @allure.sub_suite(\"CRON\")\n    @allure.title(\"Test Cron Transfer ADA Logs\")\n    @allure.feature(\"Transfer Ada Cron Function\")\n    def test_cron_transfer_ada_logs(\n        self, run_admin_agent_fixture, autonomous_agent_api\n    ):\n        agent_id = run_admin_agent_fixture.json().get(\"id\")\n        logs = (\n            autonomous_agent_api.get_trigger_history(\n                param=f\"?agent_id={agent_id}&functionName={'transferADA'}\"\n            )\n            .json()\n            .get(\"items\")\n        )\n>       assert_successful_log(\n            logs,\n            function_name=\"transferADA\",\n            trigger_type=\"CRON\",\n            message=\"No successful 'transferADA' log found\",\n        )\n\ntest_cases/test_agent_functions.py:50: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nlogs = [{'agentId': '9c3de914-fb22-4841-8dec-c40704fd1ca8', 'functionName': 'transferADA', 'message': 'KubærApi [Status 400] ...d': '9c3de914-fb22-4841-8dec-c40704fd1ca8', 'functionName': 'createInfoGovAction', 'message': '', 'status': True, ...}]\nfunction_name = 'transferADA', trigger_type = 'CRON'\nmessage = \"No successful 'transferADA' log found\"\n\n    def assert_successful_log(logs, function_name, trigger_type, message):\n        try:\n            assert any(\n                log[\"functionName\"] == function_name\n                and log[\"triggerType\"] == trigger_type\n                and log[\"status\"] is True\n                and log[\"success\"] is True\n                for log in logs\n            ), message\n        except AssertionError:\n            failed_logs = [log for log in logs if log[\"functionName\"] == function_name]\n    \n            if failed_logs:\n                allure.attach(\n                    str(failed_logs),\n                    name=\"Filtered Logs with Matching Function Name\",\n                    attachment_type=allure.attachment_type.JSON,\n                )\n            else:\n                allure.attach(\n                    \"No log found with the given parameters.\",\n                    name=\"No Matching Logs\",\n                    attachment_type=allure.attachment_type.TEXT,\n                )\n>           raise AssertionError(\n                f\"{message} | Failed Logs: {failed_logs if failed_logs else 'None'}\"\n            )\nE           AssertionError: No successful 'transferADA' log found | Failed Logs: [{'agentId': '9c3de914-fb22-4841-8dec-c40704fd1ca8', 'functionName': 'transferADA', 'status': True, 'success': False, 'timestamp': '2024-08-20T06:28:00.881000+00:00', 'message': 'KubærApi [Status 400] : ShelleyTxValidationError ShelleyBasedEraConway (ApplyTxError (ConwayUtxowFailure (UtxoFailure (ValueNotConservedUTxO (MaryValue (Coin 0) (MultiAsset (fromList []))) (MaryValue (Coin 99499640662) (MultiAsset (fromList []))))) :| [ConwayUtxowFailure (UtxoFailure (BadInputsUTxO (fromList [TxIn (TxId {unTxId = SafeHash \"deb2dfe0e755018cbf3b05114734795c1912ee957859d152e9e389f9654cc9a8\"}) (TxIx {unTxIx = 0})])))]))', 'triggerType': 'CRON', 'txHash': None}, {'agentId': '9c3de914-fb22-4841-8dec-c40704fd1ca8', 'functionName': 'transferADA', 'status': True, 'success': False, 'timestamp': '2024-08-20T06:27:55.020000+00:00', 'message': 'KubærApi [Status 400] : ShelleyTxValidationError ShelleyBasedEraConway (ApplyTxError (ConwayUtxowFailure (UtxoFailure (ValueNotConservedUTxO (MaryValue (Coin 0) (MultiAsset (fromList []))) (MaryValue (Coin 99499640662) (MultiAsset (fromList []))))) :| [ConwayUtxowFailure (UtxoFailure (BadInputsUTxO (fromList [TxIn (TxId {unTxId = SafeHash \"deb2dfe0e755018cbf3b05114734795c1912ee957859d152e9e389f9654cc9a8\"}) (TxIx {unTxIx = 0})])))]))', 'triggerType': 'CRON', 'txHash': None}]\n\ntest_cases/test_agent_functions.py:28: AssertionError","steps":[],"attachments":[{"uid":"bb33f17347ba3a90","name":"Filtered Logs with Matching Function Name","source":"bb33f17347ba3a90.json","type":"application/json","size":1316}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true},"afterStages":[{"name":"autonomous_agent_api::0","time":{"start":1724135316210,"stop":1724135316210,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"subSuite","value":"CRON"},{"name":"feature","value":"Transfer Ada Cron Function"},{"name":"parentSuite","value":"Agent Function Execution"},{"name":"suite","value":"test_agent_functions"},{"name":"host","value":"fv-az1117-399"},{"name":"thread","value":"2020-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test_cases.test_agent_functions"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":0,"skipped":0,"passed":7,"unknown":0,"total":9},"items":[{"uid":"e7355ee97a78256d","reportUrl":"https://cardanoapi.github.io/autonomous-agents/test_backend_allure_report/7//#testresult/e7355ee97a78256d","status":"passed","time":{"start":1724134686546,"stop":1724134686793,"duration":247}},{"uid":"9e842cf2edd9fc16","reportUrl":"https://cardanoapi.github.io/autonomous-agents/test_backend_allure_report/6//#testresult/9e842cf2edd9fc16","status":"passed","time":{"start":1724133854502,"stop":1724133854787,"duration":285}},{"uid":"dfe6edb38ddd4ce","reportUrl":"https://cardanoapi.github.io/autonomous-agents/test_backend_allure_report/5//#testresult/dfe6edb38ddd4ce","status":"passed","time":{"start":1724132698255,"stop":1724132698750,"duration":495}},{"uid":"ee9731a6d3bd755f","reportUrl":"https://cardanoapi.github.io/autonomous-agents/test_backend_allure_report/4//#testresult/ee9731a6d3bd755f","status":"passed","time":{"start":1723720438136,"stop":1723720438371,"duration":235}},{"uid":"b55ecb11810a91ed","reportUrl":"https://cardanoapi.github.io/autonomous-agents/test_backend_allure_report/3//#testresult/b55ecb11810a91ed","status":"failed","statusDetails":"AssertionError: No successful 'transferADA' log found\nassert False\n +  where False = any(<generator object assert_successful_log.<locals>.<genexpr> at 0x7f34f558c660>)","time":{"start":1723719852959,"stop":1723719853230,"duration":271}},{"uid":"44a552622382de50","reportUrl":"https://cardanoapi.github.io/autonomous-agents/test_backend_allure_report/2//#testresult/44a552622382de50","status":"passed","time":{"start":1723717604836,"stop":1723717605115,"duration":279}},{"uid":"bc4bed9cde525f35","reportUrl":"https://cardanoapi.github.io/autonomous-agents/test_backend_allure_report/1//#testresult/bc4bed9cde525f35","status":"passed","time":{"start":1723716845603,"stop":1723716845901,"duration":298}},{"uid":"58ba080f5245e4bd","reportUrl":"https://cardanoapi.github.io/autonomous-agents/test_backend_allure_report/1//#testresult/58ba080f5245e4bd","status":"passed","time":{"start":1723716209364,"stop":1723716209646,"duration":282}}]},"tags":[]},"source":"b61f59d1a7fb6cb6.json","parameterValues":[]}